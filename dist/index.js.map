{"version":3,"sources":["../src/index.ts","../src/math.ts"],"sourcesContent":["import { getPermutations } from './math';\r\n\r\nconsole.log({\r\n  1: getPermutations(1),\r\n  2: getPermutations(2),\r\n  3: getPermutations(3),\r\n  4: getPermutations(4),\r\n  5: getPermutations(5),\r\n  6: getPermutations(6),\r\n  7: getPermutations(7),\r\n  8: getPermutations(8),\r\n  9: getPermutations(9),\r\n  10: getPermutations(100000),\r\n});\r\n\r\nexport { getPermutations };\r\n","import BigNumber from 'bignumber.js';\r\n\r\nconst PI = new BigNumber(Math.PI);\r\nconst E = new BigNumber(Math.E);\r\nconst TWO = new BigNumber(2);\r\nconst ONE = new BigNumber(1);\r\n\r\n/**\r\n *\r\n */\r\nfunction stirlingApproximation(n: BigNumber) {\r\n  if (n.isEqualTo(1)) {\r\n    return ONE;\r\n  }\r\n  console.log('left');\r\n  const left = n.times(PI).times(TWO).sqrt();\r\n  console.log('right');\r\n  const right = n.dividedBy(E);\r\n  console.log('product');\r\n  const product = left.times(power(right, n));\r\n  console.log(product);\r\n  return product;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction power(base: BigNumber, exponent: BigNumber): BigNumber {\r\n  let result = new BigNumber(1);\r\n  let multiplier = base;\r\n  let remainder = exponent;\r\n\r\n  while (remainder.gt(0)) {\r\n    console.log(remainder.gt(0));\r\n    if (remainder.modulo(2).eq(1)) {\r\n      result = result.times(multiplier);\r\n    }\r\n    console.log('mult');\r\n    multiplier = multiplier.times(multiplier);\r\n    console.log('div');\r\n    remainder = remainder.dividedBy(2);\r\n  }\r\n  console.log('done');\r\n  return result;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction* factorial(n: BigNumber): Generator<BigNumber> {\r\n  let result = ONE;\r\n  for (let i = new BigNumber(2); i.lte(n); i = i.plus(1)) {\r\n    result = result.times(i);\r\n    yield result;\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction floor(n: BigNumber) {\r\n  return n.integerValue(BigNumber.ROUND_FLOOR);\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport function getPermutations(n: number) {\r\n  const N = new BigNumber(n);\r\n  let factor;\r\n\r\n  if (n > 10000) {\r\n    console.log('stir', n);\r\n    factor = {\r\n      value: stirlingApproximation(N),\r\n    };\r\n  } else {\r\n    console.log('iterate', n);\r\n    const factorialGenerator = factorial(N);\r\n    factor = factorialGenerator.next();\r\n\r\n    while (!factor.done) {\r\n      factor = factorialGenerator.next();\r\n    }\r\n  }\r\n  console.log('here', n);\r\n  const eTimesNFactorial = E.times(factor.value);\r\n  const result = floor(eTimesNFactorial).minus(1);\r\n\r\n  if (result.gte(Number.MAX_VALUE)) {\r\n    return result.toExponential(3);\r\n  } else {\r\n    return result.toString();\r\n  }\r\n}\r\n"],"mappings":"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","names":["BigNumber"]}